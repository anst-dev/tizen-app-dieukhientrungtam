<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Water Quality Monitoring Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#0ea5e9", // Sky blue for water theme
                        secondary: "#6366f1", // Indigo
                        "background-light": "#f0f4f8",
                        "background-dark": "#0f172a",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1e293b",
                        "text-light": "#334155",
                        "text-dark": "#e2e8f0",
                    },
                    fontFamily: {
                        display: ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        DEFAULT: "0.5rem",
                    },
                },
            },
        };
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* TV optimized table styles - compact for TV display */
        .tv-table th,
        .tv-table td {
            padding: 0.1rem 0.35rem !important;
            font-size: 0.6rem !important;
            line-height: 1.2 !important;
        }

        .tv-table .section-header td {
            padding: 0.05rem 0.35rem !important;
            font-size: 0.55rem !important;
            font-weight: 700;
        }

        /* Highlight labels */
        .param-label {
            color: #64748b;
            font-weight: 500;
        }

        .dark .param-label {
            color: #94a3b8;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark min-h-screen transition-colors duration-300 overflow-hidden flex flex-col gap-4 mx-auto"
    style="width: 98%; max-width: 98%; padding: 1vh 0;">
    <header class="flex justify-between items-center mb-1 shrink-0">
        <div>
            <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">
                    Water Quality Monitoring Center
                </h1>
                <p class="text-xs text-slate-500 dark:text-slate-400">Real-time Dashboard • Hưng Nguyên, Hưng Vĩnh, Cầu
                    Bạch</p>
        </div>
        <div class="flex items-center gap-4">
            <div class="glass-panel px-3 py-1.5 rounded-full flex items-center gap-2 text-xs font-medium shadow-sm">
                <span class="relative flex h-2 w-2" id="live-indicator">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                <span id="live-status">Live Updates</span>
            </div>
            <div class="text-right">
                <div class="text-xl font-semibold" id="clock">14:30:05</div>
                <div class="text-[10px] text-slate-500 dark:text-slate-400 uppercase tracking-tighter"
                    id="current-date">October 24, 2023</div>
            </div>
        </div>
    </header>

    <!-- Detail Tables Section -->
    <section class="flex-1 grid grid-cols-3 gap-3 min-h-0 overflow-hidden">
        <!-- Hưng Nguyên Details -->
        <div class="glass-panel rounded-xl shadow-lg flex flex-col overflow-hidden h-full">
            <div class="bg-primary/10 p-2 border-b border-primary/20 flex justify-between items-center">
                <h3 class="font-bold text-primary text-sm uppercase">NMN Hưng Nguyên</h3>
                <span class="text-[10px] bg-primary/20 text-primary px-2 py-0.5 rounded uppercase font-bold">Live</span>
            </div>
            <div class="overflow-y-auto flex-1 p-0">
                <table class="w-full text-left tv-table">
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <!-- 1. Jartest Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-primary uppercase" colspan="4">Kết quả Jartest</td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Chỉ tiêu</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="hn-j-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-j-voi">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-j-pac">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-j-polyme">-- g/m3</td>
                        </tr>

                        <!-- 2. Operations Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-primary uppercase" colspan="4">Thông tin vận hành</td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Thiết bị</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="hn-f-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-f-voi">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-f-pac">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Than hoạt tính</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-f-than">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">KMnO4</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-f-kmno4">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hn-f-polyme">-- l/h</td>
                        </tr>

                        <!-- 3. Quality Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-primary uppercase" colspan="4">Kết quả chất lượng nước</td>
                        </tr>
                        <tr
                            class="bg-slate-100 dark:bg-slate-800 text-[9px] uppercase font-bold text-slate-500 dark:text-slate-400 sticky top-0 z-10">
                            <th class="px-4 py-1">Chỉ tiêu</th>
                            <th class="px-4 py-1 text-right">Giờ</th>
                            <th class="px-4 py-1 text-right">Lần</th>
                            <th class="px-4 py-1 text-right">Giá trị</th>
                        </tr>
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <!-- Quality Sections -->
                        <!-- 1. Nước nguồn -->
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-600 dark:text-blue-400" colspan="4">1. NƯỚC NGUỒN</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-primary" id="hn-nguon-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-nguon-nh4">--</td>
                        </tr>

                        <!-- 2. NGĂN PHÂN CHIA LƯU LƯỢNG -->
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-600 dark:text-blue-400" colspan="4">2. NGĂN PHÂN CHIA LƯU
                                LƯỢNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-pcll-clo">--</td>
                        </tr>

                        <!-- 3. Sau lắng -->
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-600 dark:text-blue-400" colspan="4">3. SAU LẮNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-primary" id="hn-slang-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-slang-nh4">--</td>
                        </tr>

                        <!-- 4. Sau lọc -->
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-600 dark:text-blue-400" colspan="4">4. SAU LỌC</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-primary" id="hn-sloc-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-ph-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-primary" id="hn-sloc-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-sloc-nh4">--</td>
                        </tr>

                        <!-- 5. Bơm cấp 2 -->
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-600 dark:text-blue-400" colspan="4">5. BƠM CẤP 2</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-primary" id="hn-bomc2-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hn-bomc2-nh4">--</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Hưng Vĩnh Details -->
        <div class="glass-panel rounded-xl shadow-lg flex flex-col overflow-hidden h-full">
            <div class="bg-purple-500/10 p-2 border-b border-purple-500/20 flex justify-between items-center">
                <h3 class="font-bold text-purple-600 dark:text-purple-400 text-sm uppercase">NMN Hưng Vĩnh</h3>
                <span
                    class="text-[10px] bg-purple-500/20 text-purple-600 dark:text-purple-400 px-2 py-0.5 rounded uppercase font-bold">Live</span>
            </div>
            <div class="overflow-y-auto flex-1 p-0">
                <table class="w-full text-left tv-table">
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <!-- 1. Jartest Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400 uppercase" colspan="4">Kết quả
                                Jartest</td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Chỉ tiêu</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="hv-j-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-j-voi">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-j-pac">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-j-polyme">-- g/m3</td>
                        </tr>

                        <!-- 2. Operations Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400 uppercase" colspan="4">Thông tin
                                vận hành</td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Thiết bị</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="hv-f-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-f-voi">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-f-pac">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Than hoạt tính</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-f-than">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">KMnO4</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-f-kmno4">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="hv-f-polyme">-- l/h</td>
                        </tr>

                        <!-- 3. Quality Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400 uppercase" colspan="4">Kết quả
                                chất lượng nước</td>
                        </tr>
                        <tr
                            class="bg-slate-100 dark:bg-slate-800 text-[9px] uppercase font-bold text-slate-500 dark:text-slate-400 sticky top-0 z-10">
                            <th class="px-4 py-1">Chỉ tiêu</th>
                            <th class="px-4 py-1 text-right">Giờ</th>
                            <th class="px-4 py-1 text-right">Lần</th>
                            <th class="px-4 py-1 text-right">Giá trị</th>
                        </tr>
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <!-- Quality Sections -->
                        <!-- 1. Nước nguồn -->
                        <tr class="bg-purple-50/50 dark:bg-purple-900/20 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400" colspan="4">1. NƯỚC NGUỒN</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-purple-500" id="hv-nguon-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-nguon-nh4">--</td>
                        </tr>

                        <!-- 2. NGĂN PHÂN CHIA LƯU LƯỢNG -->
                        <tr class="bg-purple-50/50 dark:bg-purple-900/20 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400" colspan="4">2. NGĂN PHÂN CHIA LƯU
                                LƯỢNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-pcll-clo">--</td>
                        </tr>

                        <tr class="bg-purple-50/50 dark:bg-purple-900/20 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400" colspan="4">3. SAU LẮNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-purple-500" id="hv-slang-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-slang-nh4">--</td>
                        </tr>

                        <tr class="bg-purple-50/50 dark:bg-purple-900/20 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400" colspan="4">4. SAU LỌC</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-purple-500" id="hv-sloc-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-ph-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-purple-500" id="hv-sloc-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-sloc-nh4">--</td>
                        </tr>


                        <tr class="bg-purple-50/50 dark:bg-purple-900/20 section-header">
                            <td class="px-4 py-1 text-purple-600 dark:text-purple-400" colspan="4">5. BƠM CẤP 2</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-purple-500" id="hv-bomc2-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="hv-bomc2-nh4">--</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Cầu Bạch Details -->
        <div class="glass-panel rounded-xl shadow-lg flex flex-col overflow-hidden h-full">
            <div class="bg-teal-500/10 p-2 border-b border-teal-500/20 flex justify-between items-center">
                <h3 class="font-bold text-teal-600 dark:text-teal-400 text-sm uppercase">NMN Cầu Bạch</h3>
                <span
                    class="text-[10px] bg-teal-500/20 text-teal-600 dark:text-teal-400 px-2 py-0.5 rounded uppercase font-bold">Live</span>
            </div>
            <div class="overflow-y-auto flex-1 p-0">
                <table class="w-full text-left tv-table">
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <!-- 1. Jartest Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400 uppercase" colspan="4">Kết quả Jartest
                            </td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Chỉ tiêu</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="cb-j-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-j-voi">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-j-pac">-- g/m3</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-j-polyme">-- g/m3</td>
                        </tr>

                        <!-- 2. Operations Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400 uppercase" colspan="4">Thông tin vận
                                hành</td>
                        </tr>
                        <tr class="bg-slate-50/50 dark:bg-slate-900/50 text-[10px] uppercase text-slate-400 font-bold">
                            <td class="px-4 py-1">Thiết bị</td>
                            <td class="px-4 py-1 text-right" colspan="2">Thời gian: <span id="cb-f-time">--</span></td>
                            <td class="px-4 py-1 text-right">Giá trị</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Vôi</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-f-voi">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">PAC</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-f-pac">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Than hoạt tính</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-f-than">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">KMnO4</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-f-kmno4">-- l/h</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Polyme</td>
                            <td class="px-4 py-1 text-right" colspan="2"></td>
                            <td class="px-4 py-1 text-right font-medium" id="cb-f-polyme">-- l/h</td>
                        </tr>

                        <!-- 3. Quality Section -->
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400 uppercase" colspan="4">Kết quả chất
                                lượng nước</td>
                        </tr>
                        <tr
                            class="bg-slate-100 dark:bg-slate-800 text-[9px] uppercase font-bold text-slate-500 dark:text-slate-400 sticky top-0 z-10">
                            <th class="px-4 py-1">Chỉ tiêu</th>
                            <th class="px-4 py-1 text-right">Giờ</th>
                            <th class="px-4 py-1 text-right">Lần</th>
                            <th class="px-4 py-1 text-right">Giá trị</th>
                        </tr>
                        <!-- 1. Nước nguồn -->
                        <tr class="bg-teal-50/50 dark:bg-teal-900/20 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400" colspan="4">1. NƯỚC NGUỒN</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-teal-500" id="cb-nguon-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-nguon-nh4">--</td>
                        </tr>
                        <!-- 2. NGĂN PHÂN CHIA LƯU LƯỢNG -->
                        <tr class="bg-teal-50/50 dark:bg-teal-900/20 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400" colspan="4">2. NGĂN PHÂN CHIA LƯU
                                LƯỢNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-pcll-clo">--</td>
                        </tr>
                        <!-- 3. Sau lắng -->
                        <tr class="bg-teal-50/50 dark:bg-teal-900/20 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400" colspan="4">3. SAU LẮNG</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-teal-500" id="cb-slang-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-slang-nh4">--</td>
                        </tr>
                        <!-- 4. Sau lọc -->
                        <tr class="bg-teal-50/50 dark:bg-teal-900/20 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400" colspan="4">4. SAU LỌC</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-teal-500" id="cb-sloc-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-ph-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-teal-500" id="cb-sloc-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-sloc-nh4">--</td>
                        </tr>
                        <!-- 5. Bơm cấp 2 -->
                        <tr class="bg-teal-50/50 dark:bg-teal-900/20 section-header">
                            <td class="px-4 py-1 text-teal-600 dark:text-teal-400" colspan="4">5. BƠM CẤP 2</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-ntu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-ntu-count">--</td>
                            <td class="px-4 py-1 text-right font-bold text-teal-500" id="cb-bomc2-ntu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">TCU</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-tcu-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-tcu-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-tcu">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-ph-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-ph-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-ph">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo dư</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-clo-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-clo-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-clo">--</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-nh4-time">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-nh4-count">--</td>
                            <td class="px-4 py-1 text-right" id="cb-bomc2-nh4">--</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Sông Đào Details - HIDDEN
        <div class="glass-panel rounded-xl shadow-lg flex flex-col overflow-hidden h-full">
            <div class="bg-blue-600/10 p-2 border-b border-blue-600/20 flex justify-between items-center">
                <h3 class="font-bold text-blue-700 dark:text-blue-400 text-sm uppercase">Sông Đào</h3>
                <span
                    class="text-[10px] bg-blue-600/20 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded uppercase font-bold">Raw</span>
            </div>
            <div class="overflow-y-auto flex-1 p-0">
                <table class="w-full text-left tv-table">
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        <tr class="bg-slate-200/50 dark:bg-slate-800/80 section-header">
                            <td class="px-4 py-1 text-blue-700 dark:text-blue-400 uppercase" colspan="2">Kết quả chất
                                lượng nước</td>
                        </tr>
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20 section-header">
                            <td class="px-4 py-1 text-blue-700 dark:text-blue-400 font-bold" colspan="2" id="sd-vitri">
                                - -</td>
                        </tr>
                        <tr class="bg-blue-50/50 dark:bg-blue-900/20">
                            <td class="px-4 py-1 text-slate-600 dark:text-slate-400" colspan="2">Thời gian lấy mẫu:
                                <span id="sd-time">- -</span>
                            </td>
                        </tr>
                        <tr
                            class="bg-slate-100 dark:bg-slate-800 text-[9px] uppercase font-bold text-slate-500 dark:text-slate-400 sticky top-0 z-10">
                            <th class="px-4 py-1">Chỉ tiêu</th>
                            <th class="px-4 py-1 text-right">Giá trị</th>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NTU</td>
                            <td class="px-4 py-1 text-right font-bold text-blue-600" id="sd-ntu">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">pH</td>
                            <td class="px-4 py-1 text-right" id="sd-ph">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NH4</td>
                            <td class="px-4 py-1 text-right" id="sd-nh4">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Clo</td>
                            <td class="px-4 py-1 text-right" id="sd-clo">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Fe</td>
                            <td class="px-4 py-1 text-right" id="sd-fe">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NO2</td>
                            <td class="px-4 py-1 text-right" id="sd-no2">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">NO3</td>
                            <td class="px-4 py-1 text-right" id="sd-no3">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Ecoli</td>
                            <td class="px-4 py-1 text-right" id="sd-ecoli">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Coliform</td>
                            <td class="px-4 py-1 text-right" id="sd-coliform">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Tình trạng dòng chảy</td>
                            <td class="px-4 py-1 text-right" id="sd-dongchay">- -</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-1 param-label">Tình trạng ô nhiễm</td>
                            <td class="px-4 py-1 text-right" id="sd-onhiem">- -</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        -->
    </section>

    <footer class="mt-auto pt-1 shrink-0 flex justify-between text-[10px] text-slate-500 dark:text-slate-400">
        <div>System Status: <span class="font-bold" id="system-status">Connecting...</span></div>
        <div class="flex gap-4">
            <div>Last Sync: <span id="last-sync-time"
                    class="font-medium text-slate-600 dark:text-slate-300">Never</span></div>
            <div>© 2024 NAWASCO</div>
        </div>
    </footer>

    <script>
        // ============================================
        // CONFIGURATION
        // ============================================
        const API_HOST = 'https://unsupercilious-leonarda-unreaving.ngrok-free.dev';
        const REFRESH_INTERVAL = 60000; // 60 seconds
        const AUTH_TOKEN = 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjQ0MiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJuc3RhbmgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJuc3RhbmhAbmF3YXNjby5jb20udm4iLCJBc3BOZXQuSWRlbnRpdHkuU2VjdXJpdHlTdGFtcCI6IlJNRFdIVExXTU1LUzdZNElGM1FMVlEyRUU2Q1ZRNjJRIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjpbIkFkbWluIiwixJDEg25nIGvDvSBuZ2jhu4kiXSwic3ViIjoiNDQyIiwianRpIjoiOWJlYmU0NzMtMmM5OC00NTczLTk2OGYtMzlmZjRmY2IzYTdkIiwiaWF0IjoxNzM3NTUyMTI5LCJuYmYiOjE3Mzc1NTIxMjksImV4cCI6MjA1MjkxMjEyOSwiaXNzIjoiRVJQIiwiYXVkIjoiRVJQIn0.i5NWUse89skdwOKFXnaBAYJA-JQBkNDYyO5ucfbVHi4';
        const XSRF_TOKEN = 'CfDJ8Jj_fLMZXdVGiF7LaxJKgH7rtmNxloOR4GtoJyOM9wdV5gFtV9WvA4QIrQpdAutf7Z5plIPUJ8C32vPSArUEwE2sEYOceeUuX-iP4qDcThuZYuZOFafo8sDx49F6eG3dkJgzqS2oIdu1LcMAX4uALVuS4cc6DvF_lTBa3w6VlvJwnqRf0jz3DWXIIHXyFKf0yQ';

        const API_ENDPOINTS = {
            hn: { j: `ChatLuongHungNguyen/GetLastestJartest`, t: `ChatLuongHungNguyen/GetLastestTongHop`, f: `ChatLuongHungNguyen/GetLastestFlow` },
            hv: { j: `ChatLuongHungVinh/GetLastestJartest`, t: `ChatLuongHungVinh/GetLastestTongHop`, f: `ChatLuongHungVinh/GetLastestFlow` },
            cb: { j: `ChatLuongCauBach/GetLastestJartest`, t: `ChatLuongCauBach/GetLastestTongHop`, f: `ChatLuongCauBach/GetLastestFlow` }
        };
        const SD_API = `MauLayNuoc/GetAllViTriLayMau`;

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================

        const setVal = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };
        const formatVal = (v, d = null) => {
            if (v === null || v === undefined || v === 'NULL') return '--';
            if (d === null) return String(v);
            return isNaN(v) ? '--' : Number(v).toFixed(d);
        };
        const formatTime = (s) => s ? new Date(s).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' }) : '--';

        async function fetchAPI(url) {
            if (!url) return null;
            try {
                const fullUrl = url.startsWith('http') ? url : `${API_HOST}/api/services/app/${url}`;
                const res = await fetch(fullUrl, { headers: { 'Authorization': AUTH_TOKEN, 'X-XSRF-TOKEN': XSRF_TOKEN, 'ngrok-skip-browser-warning': 'true' } });
                const data = await res.json();
                return data.result || data;
            } catch (e) { return null; }
        }

        // ============================================
        // UPDATE FUNCTIONS
        // ============================================

        function updateUI(prefix, data) {
            const { j, t, f } = data;

            // 1. Jartest
            if (j) {
                setVal(`${prefix}-j-time`, formatTime(j.creationTime));
                setVal(`${prefix}-j-voi`, formatVal(j.voi) + ' g/m3');
                setVal(`${prefix}-j-pac`, formatVal(j.pac) + ' g/m3');
                setVal(`${prefix}-j-polyme`, formatVal(j.polyme) + ' g/m3');
            }

            // 2. Flow (Operations)
            if (f) {
                setVal(`${prefix}-f-time`, formatTime(f.creationTime));
                setVal(`${prefix}-f-voi`, formatVal(f.flow_2) + ' l/h');
                setVal(`${prefix}-f-pac`, formatVal(f.flow_1) + ' l/h');
                setVal(`${prefix}-f-than`, formatVal(f.flow_4) + ' l/h');
                setVal(`${prefix}-f-kmno4`, formatVal(f.flow_5) + ' l/h');
                setVal(`${prefix}-f-polyme`, formatVal(f.flow_3) + ' l/h');
            } else {
                setVal(`${prefix}-f-time`, '--');
                setVal(`${prefix}-f-voi`, '-- l/h');
                setVal(`${prefix}-f-pac`, '-- l/h');
                setVal(`${prefix}-f-than`, '-- l/h');
                setVal(`${prefix}-f-kmno4`, '-- l/h');
                setVal(`${prefix}-f-polyme`, '-- l/h');
            }

            // 3. Quality
            if (t) {
                const baseTime = formatTime(t.creationTime);
                const map = (p, v, timeField, countField) => {
                    setVal(`${prefix}-${p}`, formatVal(v));
                    setVal(`${prefix}-${p}-time`, formatTime(t[timeField]) || baseTime);
                    setVal(`${prefix}-${p}-count`, t[countField] || 1);
                };

                map('nguon-ntu', t.nguon_NTU, 'ntU_ThoiGianNhap', 'nguon_NTU_Count');
                map('nguon-ph', t.nguon_pH, 'ntU_ThoiGianNhap', 'nguon_pH_Count');
                map('nguon-nh4', t.nguon_NH4, 'nguon_NH4_ThoiGianNhap', 'nguon_NH4_Count');

                map('pcll-ph', t.pclL_pH, 'ntU_ThoiGianNhap', 'pclL_pH_Count');
                map('pcll-clo', t.pclL_Clo, 'ntU_ThoiGianNhap', 'pclL_Clo_Count');

                map('slang-ntu', t.sLang_NTU, 'ntU_ThoiGianNhap', 'sLang_NTU_Count');
                map('slang-tcu', t.sLang_TCU, 'sLang_TCU_ThoiGianNhap', 'sLang_TCU_Count');
                map('slang-ph', t.sLang_pH, 'ntU_ThoiGianNhap', 'sLang_pH_Count');
                map('slang-clo', t.sLang_Clo, 'ntU_ThoiGianNhap', 'sLang_Clo_Count');
                map('slang-nh4', t.sLang_NH4, 'sLang_NH4_ThoiGianNhap', 'sLang_NH4_Count');

                map('sloc-ntu', t.sLoc_NTU, 'ntU_ThoiGianNhap', 'sLoc_NTU_Count');
                map('sloc-tcu', t.sLoc_TCU, 'sLoc_TCU_ThoiGianNhap', 'sLoc_TCU_Count');
                map('sloc-ph', t.sLoc_pH, 'ntU_ThoiGianNhap', 'sLoc_pH_Count');
                map('sloc-clo', t.sLoc_Clo, 'ntU_ThoiGianNhap', 'sLoc_Clo_Count');
                map('sloc-nh4', t.sLoc_NH4, 'sLoc_NH4_ThoiGianNhap', 'sLoc_NH4_Count');

                map('bomc2-ntu', t.bomC2_NTU, 'ntU_ThoiGianNhap', 'bomC2_NTU_Count');
                map('bomc2-tcu', t.bomC2_TCU, 'bomC2_TCU_ThoiGianNhap', 'bomC2_TCU_Count');
                map('bomc2-ph', t.bomC2_pH, 'ntU_ThoiGianNhap', 'bomC2_pH_Count');
                map('bomc2-clo', t.bomC2_Clo, 'ntU_ThoiGianNhap', 'bomC2_Clo_Count');
                map('bomc2-nh4', t.bomC2_NH4, 'bomC2_NH4_ThoiGianNhap', 'bomC2_NH4_Count');
            }
        }

        async function refresh() {
            setVal('system-status', 'Updating...');
            const results = await Promise.all(Object.keys(API_ENDPOINTS).map(async k => {
                const ep = API_ENDPOINTS[k];
                const [j, t, f] = await Promise.all([fetchAPI(ep.j), fetchAPI(ep.t), fetchAPI(ep.f)]);
                updateUI(k, { j, t, f });
                return !!t;
            }));

            // Sông Đào - API riêng - HIDDEN
            /*
            try {
                const sdData = await fetchAPI(SD_API);
                if (sdData && sdData.length > 0) {
                    const d = sdData[0];
                    setVal('sd-vitri', d.tenViTri || d.maViTriLayMauNuoc || '--');
                    if (d.thoiGianLayMau) {
                        const dt = new Date(d.thoiGianLayMau);
                        const formatted = dt.toLocaleString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
                        setVal('sd-time', formatted);
                    }
                    const showVal = (v) => (v === null || v === undefined) ? '--' : String(v);
                    setVal('sd-ntu', showVal(d.doDuc));
                    setVal('sd-ph', showVal(d.ph));
                    setVal('sd-nh4', showVal(d.amoni));
                    setVal('sd-clo', showVal(d.cl));
                    setVal('sd-fe', showVal(d.fe));
                    setVal('sd-no2', showVal(d.nO2));
                    setVal('sd-no3', showVal(d.nO3));
                    setVal('sd-ecoli', showVal(d.ecoli));
                    setVal('sd-coliform', showVal(d.coliform));
                    setVal('sd-dongchay', d.tinhTrangDongChay || '--');
                    setVal('sd-onhiem', d.tinhTrangONhiem || '--');
                }
            } catch (e) { console.log('Sông Đào API error:', e); }
            */

            setVal('system-status', results.some(r => r) ? 'Online' : 'Error');
            setVal('last-sync-time', new Date().toLocaleTimeString('vi-VN'));
        }

        function updateClock() {
            const now = new Date();
            setVal('clock', now.toLocaleTimeString('vi-VN', { hour12: false }));
            setVal('current-date', now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }));
        }

        setInterval(updateClock, 1000);
        setInterval(refresh, REFRESH_INTERVAL);
        updateClock(); refresh();
    </script>
</body>

</html>